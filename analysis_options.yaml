# This file configures the analyzer, which statically analyzes Dart code to
# check for errors, warnings, and lints.
#
# The issues identified by the analyzer are surfaced in the UI of Dart-enabled
# IDEs (https://dart.dev/tools#ides-and-editors). The analyzer can also be
# invoked from the command line by running `flutter analyze`.

# The following line activates a set of recommended lints for Flutter apps,
# packages, and plugins designed to encourage good coding practices.
include: package:flutter_lints/flutter.yaml

analyzer:
  # Exclude generated files from analysis to avoid lint warnings in them.
  exclude:
    - "**/*.g.dart" # Exclude files ending with .g.dart (e.g., json_serializable, build_runner)
    - "**/*.freezed.dart" # Exclude files generated by the 'freezed' package
    - "**/*.gr.dart" # Exclude files generated by 'auto_route'
    - "**/*.gen.dart" # Exclude files generated by 'riverpod_generator'
    - "lib/generated_plugin_registrant.dart" # Flutter specific: excludes generated plugin registration for web/desktop
    - "pkgs/**" # Local packages (assuming 'pkgs' is at the project root)

  language:
    strict-casts: true
    strict-inference: true
    strict-raw-types: true

  # Optional: You can also specify specific errors to ignore if needed
  # errors:
  #   todo: ignore # Example: Ignore all TODO comments from analysis

linter:
  # The lint rules applied to this project can be customized in the
  # section below to disable rules from the `package:flutter_lints/flutter.yaml`
  # included above or to enable additional rules. A list of all available lints
  # and their documentation is published at https://dart.dev/lints.
  #
  # Instead of disabling a lint rule for the entire project in the
  # section below, it can also be suppressed for a single line of code
  # or a specific dart file by using the `// ignore: name_of_lint` and
  # `// ignore_for_file: name_of_lint` syntax on the line or in the file
  # producing the lint.
  rules:
    # Enable additional rules not in flutter_lints (use sparingly unless needed)
    # - always_put_control_flow_in_brackets # Enforce braces even for single statements
    # - always_use_package_imports # Prefer package: imports over relative imports

    # Imports
    prefer_relative_imports: true

    # Enforce explicit type annotations for all variables, parameters, and return types.
    always_specify_types: true

    # 1. Enforces final on local variables (the primary rule you need)
    prefer_final_locals: true
    # 2. Recommends 'final' for parameters in 'for' loops (e.g., for (final item in list))
    prefer_for_elements_to_map_fromIterable: true
    # 3. Ensures class fields are final if they are only assigned in the constructor
    prefer_final_fields: true

    # Experimental
    avoid_redundant_argument_values: true
    always_put_required_named_parameters_first: true
    annotate_overrides: true
    avoid_empty_else: true
    avoid_function_literals_in_foreach_calls: true
    avoid_init_to_null: true
    avoid_renaming_method_parameters: true
    avoid_relative_lib_imports: true
    avoid_return_types_on_setters: true
    avoid_returning_null_for_void: true
    avoid_single_cascade_in_expression_statements: true
    avoid_shadowing_type_parameters: true
    avoid_types_as_parameter_names: true
    avoid_unnecessary_containers: true
    await_only_futures: true
    camel_case_extensions: true
    camel_case_types: true
    empty_constructor_bodies: true
    file_names: true
    no_duplicate_case_values: true
    prefer_is_empty: true
    prefer_is_not_empty: true
    sized_box_for_whitespace: true
    unintended_html_in_doc_comment: false
    # Disable specific rules from flutter_lints if they don't fit your style
    # (e.g., if you prefer double quotes or don't mind print statements during development)
    # - prefer_single_quotes # If you like double quotes
    # - avoid_print # If you frequently use print for debugging

    # Rules related to Flutter widget construction
    use_key_in_widget_constructors: true # Ensure widgets have keys when needed
    prefer_const_constructors: true # Prefer const for efficiency
    prefer_const_literals_to_create_immutables: true # Use const for lists, maps, etc.
    # Best practice rules
    unnecessary_brace_in_string_interps: true # Remove unnecessary braces in string interpolation
    # - curly_braces_in_flow_control # Enforce curly braces for control flow (if/for/while)
    directives_ordering: true # Sort imports/exports (highly recommended for consistency)
    # - prefer_expression_function_bodies # Prefer => for single-expression functions/getters
    # - no_leading_underscores_for_local_identifiers # Don't use `_` for local variables

    # From Dart
    always_declare_return_types: true
    # - annotate_redeclares
    # - cancel_subscriptions
    # - close_sinks
    # - combinators_ordering
    # - comment_references
    # - invalid_case_patterns
    # - one_member_abstracts
    # - only_throw_errors
# Additional information about this file can be found at
# https://dart.dev/guides/language/analysis-options
